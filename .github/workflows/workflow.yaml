name: Docker Image CI 

on:
  push

  # push:
  # release:
  #   types: [published]

jobs:
  build:
    env:
      REGISTRY: ghcr.io
      IMAGENAME: "${{ github.repository_owner }}/${{ github.event.repository.name }}"
    runs-on: ubuntu-latest
    steps:
        # checkout codebase
      - uses: actions/checkout@v4
      # login, build, and push to ghcr
      - name: login, build, and push
        run: |
          docker login --username ${{ github.repository_owner }} --password ${{ secrets.PAT }} $REGISTRY
          docker build . -t $REGISTRY/$IMAGENAME:latest
          docker push $REGISTRY/$IMAGENAME:latest






